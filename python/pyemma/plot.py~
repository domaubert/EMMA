import matplotlib.pylab as plt

from convert import *
from amr import *

def slice(filename,level, force=0, nproc=getNproc(), field="density", xmin=0, xmax=1, ymin=0, ymax=1, zmin=0, zmax=1, log=False):

	oct2grid(filename,level, force, nproc, field, xmin, xmax, ymin, ymax, zmin, zmax)

	data = cube(filename.replace("grid","cube") + "." + field + ".L" + str(level) ).getData()

	if log:
		data = np.log(data)
	
	N = pow(2,level)

	data = data[N/2,:,:]



	plt.clf()
	plt.imshow(data, interpolation='nearest',extent=(0,N,0,N), origin='top' )
	plt.colorbar()
	plt.show(block=False)
